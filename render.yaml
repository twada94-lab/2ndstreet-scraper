services:
  - type: worker
    name: 2ndstreet-scraper
    env: python
    plan: free

    buildCommand: |
      apt-get update
      apt-get install -y wget gnupg unzip
      wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
      apt install -y ./google-chrome-stable_current_amd64.deb
      pip install -r requirements.txt

    startCommand: |
      export CHROME_BIN=$(which google-chrome-stable)
      echo "âœ… Using CHROME_BIN=$CHROME_BIN"
      python scraper_line.py

    envVars:
      - key: PYTHON_VERSION
        value: 3.10.12
      - key: CHROME_BIN
        value: /usr/bin/google-chrome-stable
      - key: LINE_ACCESS_TOKEN
        sync: false
      - key: LINE_USER_ID
        sync: false
